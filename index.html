<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Stitch a Tale</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 2rem;
      background: linear-gradient(to bottom right, #fdfbfb, #ebedee);
      color: #333;
      transition: background-color 0.5s, color 0.5s;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      text-align: center;
    }

    h1 {
      font-size: 3rem;
      animation: glow 2s ease-in-out infinite alternate;
    }

    @keyframes glow {
      from { text-shadow: 0 0 5px #aaa; }
      to { text-shadow: 0 0 20px #57a5ff; }
    }

    .story-box,
    .form-section,
    .prompt-box {
      background: #ffffffcc;
      padding: 1rem 1.5rem;
      margin: 2rem 0;
      border-radius: 10px;
      border: 2px dashed #ccc;
      transition: background-color 0.5s, color 0.5s;
    }

    .prompt-box {
      font-style: italic;
      position: relative;
    }

    .prompt-box::after {
      content: "‚ú®";
      font-size: 1.2rem;
      position: absolute;
      top: 0.5rem;
      right: 1rem;
      animation: twinkle 1s infinite ease-in-out alternate;
    }

    @keyframes twinkle {
      from { opacity: 0.2; transform: rotate(0deg); }
      to { opacity: 1; transform: rotate(15deg); }
    }

    .add-sentence-link {
      display: inline-block;
      margin-top: 1rem;
      padding: 0.7rem 1.5rem;
      background-color: #0078D7;
      color: #fff;
      text-decoration: none;
      border-radius: 8px;
      font-weight: bold;
      transition: background-color 0.3s ease, transform 0.2s;
    }

    .add-sentence-link:hover {
      background-color: #005bb5;
      transform: scale(1.05);
    }

    .character-animation {
      font-size: 2rem;
      animation: float 3s ease-in-out infinite;
      display: inline-block;
      margin: 1rem 0.5rem;
    }

    @keyframes float {
      0%   { transform: translateY(0px); }
      50%  { transform: translateY(-10px); }
      100% { transform: translateY(0px); }
    }

    .button {
      padding: 0.6rem 1.2rem;
      margin: 1rem;
      background-color: #4c4cff;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
    }

    .button:hover {
      background-color: #3737cc;
    }

    /* ‚ú® Dark Mode with full black background */
    .dark-mode,
    body.dark-mode {
      background-color: #000 !important;
      background-image: none !important;
      color: #bbb !important;
    }

    .dark-mode .story-box,
    .dark-mode .form-section,
    .dark-mode .prompt-box {
      background-color: #f5f0e6;
      color: #333;
      border-color: #999;
    }


    .story-line {
  opacity: 0;
  animation: fadeInUp 0.8s ease-out forwards;
  animation-delay: calc(0.05s * var(--i));
  margin-bottom: 1rem;
  font-size: 1.1rem;
  color: #fffad1;
}

@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(15px); }
  to   { opacity: 1; transform: translateY(0); }
}


.story-box {
  max-width: 600px;
  margin: 3rem auto;
  padding: 1.5rem;
  text-align: center;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 12px;
  box-shadow: 0 0 10px rgba(255, 255, 255, 0.1);
}

.story-box p {
  text-align: center;
  line-height: 1.6;
}


.prompt-box {
  max-width: 600px;
  margin: 2rem auto;
  padding: 2rem;
  background: rgba(234, 228, 228, 0.85); /* darker semi-transparent box */
  border-radius: 12px;
  text-align: center;
  box-shadow: 0 0 12px rgba(0, 0, 0, 0.4);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.prompt-box h2 {
  font-size: 1.8rem;
  color: #ffd369; /* rich gold */
  text-shadow: 0 0 6px #ffefbb;
  margin-bottom: 1rem;
  letter-spacing: 1px;
}

#prompt-text {
  font-size: 1.25rem;
  font-weight: bold;
  color: #1f1d1d; /* clean white for max contrast */
  margin-bottom: 1.2rem;
  line-height: 1.6;
  animation: floatIn 1s ease both;
}

.leaderboard-box {
  max-width: 500px;
  margin: 3rem auto;
  padding: 1.5rem;
  background: rgba(255,255,255,0.05);
  border-radius: 12px;
  color: #ffeecc;
  text-align: center;
  font-family: 'Georgia', serif;
  box-shadow: 0 0 8px rgba(255,255,255,0.1);
}
   

.contributor-note {
  text-align: center;
  font-size: 0.95rem;
  margin: 1rem auto;
  color: #ffeecc;
  font-style: italic;
}

.first-line-note {
  margin-top: 1rem;
  font-size: 0.95rem;
  font-style: italic;
  color: #27494d;
  text-shadow: 0 0 4px rgba(255, 216, 140, 0.3);
}


.leaderboard-box p:first-child {
  background: rgba(255, 223, 80, 0.1);
  box-shadow: 0 0 12px #ffde5077;
}
  </style>
</head>
<body>

  <div class="container">

    <h1>‚ú® Stitch a Tale ‚ú®</h1>
    <p><em>One story. Infinite voices. Let yours be one of them.</em></p>

    <div>
      <span class="character-animation">ü¶ä</span>
      <span class="character-animation">üêô</span>
      <span class="character-animation">üßô</span>
      <span class="character-animation">üêâ</span>
      <span class="character-animation">ü™Ñ</span>
    </div>

    <!-- Prompt Box -->
   
    <div class="prompt-box">
  <h2>ü™∂ Your Prompt Awaits</h2>
  <p id="prompt-text">‚ÄúThe shadows in the alley had too many eyes tonight.‚Äù</p>
  <button class="button" onclick="getPrompt()">üé≤ New Prompt</button>
  <p class="first-line-note">
  üî• The first person to submit will set the story‚Äôs opening line‚Äîand become the Torch Bearer of this tale.
</p>
</div>

    <!-- Story Box -->
    <div class="story-box">
      <p><strong>Example Story:</strong></p>
      <p>‚ÄúIt all began when the stars blinked twice‚Ä¶ then the stranger knocked.‚Äù</p>
    </div>

    <!-- Add Sentence Form -->
    <div class="form-section">
      <h2>‚ûï Add Your Sentence</h2>
      <p>Click below to add your line to the story:</p>
      <a class="add-sentence-link"
         href="https://docs.google.com/forms/d/e/1FAIpQLSeqmgKPmjVOytsSnFyZwdqR7MFzzwn7hqYFV3uVQUf7jslrJw/viewform?embedded=true"
         target="_blank">
        ‚ûï Add Your Sentence
      </a>
    </div>

   

  </div>

  <script>
    function toggleDarkMode() {
      document.body.classList.toggle('dark-mode');
    }

    const prompts = [
      "The lantern flickered, revealing something that shouldn‚Äôt exist.",
      "Every Thursday, the window whispered my name.",
      "I opened the letter, and my fingerprints began to glow.",
      "The shadows in the alley had too many eyes tonight.",
      "Before the clock struck 13, we had to decide who stayed.",
      "The wind carried a secret only the trees could translate."
    ];

    function getPrompt() {
      const i = Math.floor(Math.random() * prompts.length);
      document.getElementById("prompt-text").innerText = prompts[i];
    }
  </script>

  <canvas id="fireflies"></canvas>
<script>
  const canvas = document.getElementById('fireflies');
  const ctx = canvas.getContext('2d');
  let w, h;
  let fireflies = [];

  function resize() {
    w = canvas.width = window.innerWidth;
    h = canvas.height = window.innerHeight;
  }
  window.addEventListener('resize', resize);
  resize();

  class Firefly {
    constructor() {
      this.reset();
    }
    reset() {
      this.x = Math.random() * w;
      this.y = Math.random() * h;
      this.radius = Math.random() * 1.5 + 1;
      this.alpha = Math.random();
      this.dx = (Math.random() - 0.5) * 0.5;
      this.dy = (Math.random() - 0.5) * 0.5;
    }
    move() {
      this.x += this.dx;
      this.y += this.dy;
      if (this.x < 0 || this.x > w || this.y < 0 || this.y > h) {
        this.reset();
      }
    }
    draw() {
      ctx.beginPath();
      ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
      ctx.fillStyle = `rgba(255, 255, 153, ${this.alpha})`;
      ctx.fill();
    }
  }

  for (let i = 0; i < 80; i++) {
    fireflies.push(new Firefly());
  }

  function animate() {
    ctx.clearRect(0, 0, w, h);
    fireflies.forEach(f => {
      f.move();
      f.draw();
    });
    requestAnimationFrame(animate);
  }
  animate();
</script>

<style>
  #fireflies {
    position: fixed;
    top: 0;
    left: 0;
    pointer-events: none;
    z-index: 0;
  }
</style>

<!-- Your content above -->

<script>
  // your getPrompt() function‚Ä¶

  // üîÅ Auto-enable dark mode on scroll
  let darkTriggered = false;
  window.addEventListener("scroll", function () {
    if (!darkTriggered && window.scrollY > 20) {
      document.body.classList.add("dark-mode");
      darkTriggered = true;
    }
  });
</script>

<div class="story-box" id="live-story">
  <h2>üìñ The Story So Far</h2>
  <div id="story-lines">Loading story...</div>
</div>

<script>
  async function fetchStory() {
    const res = await fetch("https://api.sheetbest.com/sheets/8960e960-b048-47a3-bc78-60d6f6ab3c97");
    const data = await res.json();
    const container = document.getElementById("story-lines");
    container.innerHTML = "";

    data.forEach((entry, i) => {
      if (entry.sentence) {
        const p = document.createElement("p");
        p.textContent = entry.sentence;
        p.classList.add("story-line");
        p.style.setProperty('--i', i);
        container.appendChild(p);
      }
    });
  }

  fetchStory();
</script>

<script>
  async function buildLeaderboard() {
    const res = await fetch("https://api.sheetbest.com/sheets/8960e960-b048-47a3-bc78-60d6f6ab3c97");
    const data = await res.json();

    const counts = {};
    data.forEach(entry => {
      const name = entry["Your name or nickname"]?.trim() || "Anonymous";
      counts[name] = (counts[name] || 0) + 1;
    });

    const sorted = Object.entries(counts).sort((a, b) => b[1] - a[1]);

    const leaderboard = document.getElementById("leaderboard");
    leaderboard.innerHTML = "<h2>üßµ Top Story Weavers</h2>";

    sorted.slice(0, 5).forEach(([name, count], i) => {
      const row = document.createElement("p");
      row.textContent = `${i + 1}. ${name} ‚Äì ${count} line${count > 1 ? "s" : ""}`;
      leaderboard.appendChild(row);
    });
  }

  buildLeaderboard();
</script>

<div class="leaderboard-box" id="leaderboard">
  <h2>Loading top weavers...</h2>
</div>

<p class="contributor-note">
  üåü Before adding your sentence, take a moment to read the tale so far. 
  Every word shapes the magic. ‚ú®
</p>


<script>
  setInterval(() => {
    fetchAndRenderStory(); // Replace with your story-fetching function
  }, 60000);
</script>

<title>Story Scroll ‚ú®</title>
<link rel="icon" href="your-favicon-link.ico" type="image/x-icon">

</body>
</html>




